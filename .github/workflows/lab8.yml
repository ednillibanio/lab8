name: Workflow Commands

on:
    workflow_dispatcher:
    push:

jobs:
  commands_job:
    runs-on: ubuntu-latest
    steps:
      - name: Set environment variable with "key" as "foo" and "value" as "bar" 
        run: |
          echo "key=foo" >> &GITHUB_ENV_VAR
          echo "value=bar" >> &GITHUB_ENV_VAR

      - name: Echo the environment variable "foo" from previous step
        run: |
          echo "Hello, $key"

      - name: Mask the "api_key" within this steps's environment variable and echo it
        env:
          api_key: 1aO764b_4e59_p@$Sw0RdAStvdf-19ofvs4F
        run: |
          echo "Un-Masked key = $api_key"
          echo "::add-mask::$api_key"
          echo "Masked key = $api_key"

      - name: Create a warning Log for this message "This is a warning message."
        run: echo "::warning::This is a warning message"

      - name: Create an error annotation with following parameters, file=app.py line=49 message=nullValue 
        run: echo echo "::error file=app.js,line=49,message=nullValue"

      - name: Set an output with "key" as "LUCKY_NUMBER" and "value" as "1234567"
        id: lucky_number_step
        run: |
          echo "key=LUCKY_NUMBER" >> GITHUB_OUTPUT
          echo "value=1234567" >> GITHUB_OUTPUT

      - name: Echo the output set in the previous step
        run: |
          echo "My lucky number is ${jobs.commands_job.steps.luck_number_step.outputs.key}"
          echo "My lucky number is ${jobs.commands_job.steps.luck_number_step.outputs.value}"

      - name: Create a Job Summary as "Exploring Workflow Commands :thumbsup:"
        run: echo "Exploring Workflow Commands :thumbsup:" >> $GITHUB_STEP_SUMMARY